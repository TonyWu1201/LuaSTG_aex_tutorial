# LuaSTG Sub 文件系统指南
前置说明：

+ **工作目录** 运行 **LuaSTG Sub** 时所在的目录，在文件资源管理器中直接双击打开时可以认为工作目录就是 **LuaSTG Sub** 所在目录。

**LuaSTG Sub** 中定义的：

+ **压缩包目录** 包含通过 `lstg.LoadPack` 和 `lstg.LoadPackSub` 注册的压缩包的信息。
+ **搜索目录** 包含通过 `lstg.AddSearchPath` 添加的目录。

在 **LuaSTG Sub** 中添加**压缩包目录**和**搜索目录**遵循以下的规律：

1. 执行 `lstg.LoadPack` 和 `lstg.LoadPackSub` 时会将压缩包信息添加到**压缩包目录**列表的**最前端**。
2. 执行 `lstg.AddSearchPath` 时：
    1. 若**搜索目录**中已存在要添加的目录，则会先**从列表中移除**该目录。
    2. 将目录信息添加到**搜索目录**列表的**最后端**(v 0.21.100之前)或**最前端**。

在 **LuaSTG Sub** 中加载图像或音频等资源时会按照以下方法寻找文件：

1. 对**压缩包目录**中的压缩包，在压缩包中寻找是否存在所查找的文件。
2. 查找相对**工作目录**是否存在所查找的文件。
3. 对**搜索目录**中的每一个**路径**，执行以下操作：
    1. 将所给的文件名或文件路径添加到列表的路径之后，得到**新的路径**。
    2. 对**压缩包目录**中的压缩包，在压缩包中寻找是否存在所查找的文件。
    3. 查找相对**工作目录**是否存在所查找的文件。

注意：
+ 只有 **LuaSTG Sub** 的 API 会按照上述方法寻找文件，通过 lua 原生的方法打开文件**只会**相对**工作目录**查找文件。
+ 寻找 `lstg.LoadPack` 和 `lstg.LoadPackSub` 添加的压缩包时是相对**工作目录**寻找的。